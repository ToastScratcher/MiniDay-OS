<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MiniDay OS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        :root { --primary: #6366f1; --bg: #000; --glass: rgba(255, 255, 255, 0.1); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { 
            font-family: -apple-system, sans-serif; 
            background: #000; color: white; margin: 0; 
            overflow-x: hidden; overflow-y: auto;
            min-height: 100vh;
        }

        #wallpaper { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: radial-gradient(circle at 50% 30%, #1e1b4b 0%, #000 100%); 
            z-index: -1; 
        }

        .status-header { text-align: center; padding: 60px 0 20px 0; }
        #home-clock { font-size: 3.5rem; font-weight: 200; margin: 0; }
        #home-date { font-size: 1rem; color: #94a3b8; }

        .app-grid { 
            display: grid; grid-template-columns: repeat(4, 1fr); 
            gap: 25px 10px; padding: 20px; max-width: 500px; margin: 0 auto 120px auto;
        }

        .app-icon { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .icon-box { 
            width: 60px; height: 60px; border-radius: 16px; display: flex; 
            align-items: center; justify-content: center; font-size: 1.8rem; 
            margin-bottom: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .app-label { font-size: 0.7rem; color: #ccc; text-align: center; }

        .dock-container { position: fixed; bottom: 20px; width: 100%; display: flex; justify-content: center; z-index: 50; }
        .dock { 
            width: 90%; max-width: 350px; height: 80px; 
            background: rgba(255,255,255,0.1); backdrop-filter: blur(25px); 
            border-radius: 24px; display: flex; justify-content: space-around; 
            align-items: center; border: 0.5px solid rgba(255,255,255,0.2); 
        }

        .app-window { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: #0f172a; z-index: 100; display: none; flex-direction: column; 
        }
        .app-header { 
            padding: 50px 20px 15px 20px; background: #1e293b; 
            display: flex; justify-content: space-between; align-items: center; 
        }
        .close-btn { background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; font-weight: bold; }
        
        iframe { width: 100%; flex-grow: 1; border: none; background: white; }
        .app-content-inner { flex-grow: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; }

        /* LISTS & UI */
        input { width: 100%; padding: 14px; border-radius: 12px; border: 1px solid #334155; background: #1e293b; color: white; margin-bottom: 10px; }
        .action-btn { background: var(--primary); color: white; border: none; border-radius: 12px; padding: 14px; width: 100%; font-weight: bold; }
        
        /* CALCULATOR */
        .calc-container { margin: auto; background: #1e293b; padding: 15px; border-radius: 20px; width: 240px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .calc-display { font-size: 1.8rem; text-align: right; padding: 10px; color: white; margin-bottom: 10px; border-bottom: 1px solid #334155; }
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .calc-btn { width: 45px; height: 45px; border-radius: 50%; border: none; background: #334155; color: white; font-size: 1rem; font-weight: bold; }
        .calc-btn.op { background: var(--primary); }
    </style>
</head>
<body>

    <div id="wallpaper"></div>

    <div class="status-header">
        <h1 id="home-clock">00:00</h1>
        <div id="home-date">Loading...</div>
    </div>

    <div class="app-grid">
        <div class="app-icon" onclick="window.open('https://gemini.google.com', '_blank')"><div class="icon-box" style="background: linear-gradient(45deg, #4285f4, #9b72cb)">‚ú®</div><span class="app-label">Gemini</span></div>
        <div class="app-icon" onclick="openApp('youtube')"><div class="icon-box" style="background:#ff0000">‚ñ∂Ô∏è</div><span class="app-label">YouTube</span></div>
        <div class="app-icon" onclick="window.open('https://www.ubereats.com', '_blank')"><div class="icon-box" style="background:#06c167">üçî</div><span class="app-label">Uber Eats</span></div>
        <div class="app-icon" onclick="openApp('quran')"><div class="icon-box" style="background:#059669">üìñ</div><span class="app-label">Quran</span></div>
        <div class="app-icon" onclick="openApp('shop')"><div class="icon-box" style="background:#f59e0b">üõí</div><span class="app-label">Shopping</span></div>
        <div class="app-icon" onclick="openApp('tv')"><div class="icon-box" style="background:#bb1919">üì∫</div><span class="app-label">TV Guide</span></div>
        <div class="app-icon" onclick="openApp('notes')"><div class="icon-box" style="background:#64748b">üìù</div><span class="app-label">Notes</span></div>
        <div class="app-icon" onclick="window.open('https://www.chroniclelive.co.uk/', '_blank')"><div class="icon-box" style="background:#00457c">üì∞</div><span class="app-label">News</span></div>
        <div class="app-icon" onclick="openApp('calc')"><div class="icon-box" style="background:#4b5563">üî¢</div><span class="app-label">Calculator</span></div>
    </div>

    <div class="dock-container">
        <div class="dock">
            <div class="app-icon" onclick="openApp('map')"><div class="icon-box" style="background:#10b981">üó∫Ô∏è</div></div>
            <div class="app-icon" onclick="openApp('music')"><div class="icon-box" style="background:#6366f1">üéµ</div></div>
            <div class="app-icon" onclick="openApp('football')"><div class="icon-box" style="background:#3d195b">‚öΩ</div></div>
        </div>
    </div>

    <div id="app-window" class="app-window">
        <div class="app-header">
            <span id="app-title">App</span>
            <button class="close-btn" onclick="closeApp()">BACK</button>
        </div>
        <div id="app-content" style="flex-grow:1; display:flex; flex-direction:column; overflow:hidden;"></div>
    </div>

    <script>
        function updateClock() {
            const d = new Date();
            document.getElementById('home-clock').innerText = d.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById('home-date').innerText = d.toLocaleDateString(undefined, {weekday: 'long', month: 'short', day: 'numeric'});
        }
        setInterval(updateClock, 1000); updateClock();

        let calcVal = "";

        function openApp(id) {
            const win = document.getElementById('app-window');
            const cont = document.getElementById('app-content');
            const title = document.getElementById('app-title');
            
            cont.innerHTML = ""; 
            win.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            if(id === 'calc') {
                title.innerText = "Calculator";
                cont.innerHTML = `<div style="margin:auto"><div class="calc-container"><div class="calc-display" id="cDisp">0</div><div class="calc-grid"><button class="calc-btn" onclick="cIn('C')" style="color:#ff4444">C</button><button class="calc-btn op" onclick="cIn('/')">√∑</button><button class="calc-btn op" onclick="cIn('*')">√ó</button><button class="calc-btn op" onclick="cIn('-')">‚àí</button><button class="calc-btn" onclick="cIn('7')">7</button><button class="calc-btn" onclick="cIn('8')">8</button><button class="calc-btn" onclick="cIn('9')">9</button><button class="calc-btn op" onclick="cIn('+')">+</button><button class="calc-btn" onclick="cIn('4')">4</button><button class="calc-btn" onclick="cIn('5')">5</button><button class="calc-btn" onclick="cIn('6')">6</button><button class="calc-btn op" onclick="cIn('=')" style="background:#10b981">=</button><button class="calc-btn" onclick="cIn('1')">1</button><button class="calc-btn" onclick="cIn('2')">2</button><button class="calc-btn" onclick="cIn('3')">3</button><button class="calc-btn" onclick="cIn('0')">0</button></div></div></div>`;
            } else if(id === 'youtube') {
                title.innerText = "YouTube";
                cont.innerHTML = `<iframe src="https://www.youtube.com/embed/C3nvdFDAzyY" allowfullscreen></iframe>`;
            } else if(id === 'quran') {
                title.innerText = "Quran";
                cont.innerHTML = `<iframe src="https://quran.com"></iframe>`;
            } else if(id === 'tv') {
                title.innerText = "TV Guide";
                cont.innerHTML = `<iframe src="https://www.tvguide.co.uk/"></iframe>`;
            } else if(id === 'football') {
                title.innerText = "Live Scores";
                cont.innerHTML = `<iframe src="https://www.bing.com/search?q=premier+league+scores"></iframe>`;
            } else if(id === 'map') {
                title.innerText = "Maps";
                cont.innerHTML = `<div id="map" style="width:100%;height:100%"></div>`;
                setTimeout(() => {
                    let m = L.map('map').setView([54.9783, -1.6178], 13);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(m);
                }, 200);
            } else if(id === 'shop') {
                title.innerText = "Shopping List";
                cont.innerHTML = `<div class="app-content-inner"><input id="shopIn" placeholder="Add item..."><button class="action-btn" onclick="addItem()">ADD</button><div id="shopList" style="margin-top:20px;"></div></div>`;
                renderItems();
            } else if(id === 'notes') {
                title.innerText = "Notes";
                cont.innerHTML = `<div class="app-content-inner"><textarea id="noteArea" style="flex:1; background:#1e293b; color:white; border:none; border-radius:12px; padding:15px; margin-bottom:10px;"></textarea><button class="action-btn" onclick="saveNote()">SAVE .TXT</button></div>`;
            } else if(id === 'music') {
                title.innerText = "Music Player";
                cont.innerHTML = `<div class="app-content-inner" style="text-align:center;"><div style="font-size:4rem; margin:20px;">üéµ</div><input type="file" id="musicFile" style="display:none" onchange="playMusic(event)"><button class="action-btn" onclick="document.getElementById('musicFile').click()">PICK SONG</button><audio id="player" controls style="width:100%; margin-top:20px;"></audio></div>`;
            }
        }

        // Logic Functions
        function cIn(v) {
            const d = document.getElementById('cDisp');
            if(v === 'C') calcVal = "";
            else if(v === '=') { try { calcVal = eval(calcVal).toString(); } catch { calcVal = "Error"; } }
            else calcVal += v;
            d.innerText = calcVal || "0";
        }

        function addItem() {
            const i = document.getElementById('shopIn'); if(!i.value) return;
            let l = JSON.parse(localStorage.getItem('miniday_list')) || [];
            l.push(i.value); localStorage.setItem('miniday_list', JSON.stringify(l));
            i.value = ""; renderItems();
        }
        function renderItems() {
            let l = JSON.parse(localStorage.getItem('miniday_list')) || [];
            document.getElementById('shopList').innerHTML = l.map((item, idx) => `<div style="background:#1e293b; padding:12px; border-radius:10px; margin-bottom:8px; display:flex; justify-content:space-between;">${item}<span onclick="delItem(${idx})" style="color:red">‚úï</span></div>`).join('');
        }
        function delItem(idx) {
            let l = JSON.parse(localStorage.getItem('miniday_list')); l.splice(idx, 1);
            localStorage.setItem('miniday_list', JSON.stringify(l)); renderItems();
        }
        function saveNote() {
            const blob = new Blob([document.getElementById('noteArea').value], {type:"text/plain"});
            const a = document.createElement("a"); a.href=URL.createObjectURL(blob); a.download="note.txt"; a.click();
        }
        function playMusic(e) {
            const file = e.target.files[0]; const p = document.getElementById('player');
            p.src = URL.createObjectURL(file); p.play();
        }
        function closeApp() { 
            document.getElementById('app-window').style.display = 'none'; 
            document.getElementById('app-content').innerHTML = ""; 
            document.body.style.overflow = 'auto'; 
        }
    </script>
</body>
</html>
